# 원티드 프리온보딩 코스

####

## Toggle

### 구현 방법

- _상태_

  - 버튼의 on/off를 관리하기 위한 `boolean` 상태

- 버튼을 클릭할 때마다 상태값이 `true` -> `false`, `false` -> `true`로 바뀌어야 하기 때문에 현재 상태값의 반대로 바뀌주는 일을 하는 함수를 하나 만들어 사용
- 삼항 연산자를 이용하여 상태값에 따라 버튼의 위치, 배경색, 텍스트를 다르게 보여줌
- toggle 상태에 따라 버튼모양 변화가 자연스럽도록 `transition`을 사용함
- 토글의 on/off와 활성/비활성를 props로 전달받아 보여주도록 구현함

### 사용 방법

| props   | type                 | required |
| ------- | -------------------- | -------- |
| checked | boolean \| undefined |          |
| disable | boolean \| undefined |          |

```jsx
<Toggle checked disable />
```

####

---

## Modal

### 구현 방법

- _상태_
  - 모달의 가려짐, 보임을 관리하기 위한 `boolean` 상태
- 모달을 여는 경우와 닫는 경우가 Open Modal 버튼을 클릭했을 경우, 모달의 X를 클릭했을 경우로 분리되어 있으므로 모달을 여는 일을 하는 함수와 닫는 일을 하는 함수를 따로 만듦
- 삼항 연산자를 이용하여 상태값에 따라 모달이 화면에 보이거나, 사라지도록 구현함
- 버튼의 내용과 모달의 내용을 props로 전달받아 보여주도록 구현함

### 어려웠던 점

- 모달 창 밖을 클릭했을 경우에도 모달 닫히기
  - _해결_
    - useRef를 이용하여 해결
    - 모달 창이 화면에 보이는 상태에서 클릭이 일어났을 때, useRef를 이용해서 클릭된 요소가 모달 창 밖인지 안인지 확인하여 창을 닫음

### 사용 방법

|               | type   | required |
| ------------- | ------ | -------- |
| openerMessage | string | required |
| modalMessage  | string | required |

```jsx
<Modal openerMessage='Open Modal' modalMessage='HELLO CODESTATES!' />
```

####

---

## Tab

### 구현 방법

- _상태_

  - 선택된 탭의 인덱스(`boolean`)

- 탭의 개수가 변하더라도 수정을 최소화하기 위해 탭의 이름과 내용을 객체의 배열로 props로 전달받아 화면에 보여줌
- 선택된 탭과 선택되지 않은 탭의 css를 다르게 적용함
- 선택된 탭의 내용을 화면에 보여줌

### 사용 방법

|          | type     | required |
| -------- | -------- | -------- |
| contents | object[] | required |

```jsx
const tabData = [
  { name: 'Tab1', details: 'Tab menu ONE' },
  { name: 'Tab2', details: 'Tab menu TWO' },
  { name: 'Tab3', details: 'Tab menu THREE' },
];

<Tab contents={tabData} />;
```

####

---

## Tag

### 구현 방법

- _상태_

  - 입력된 태그 배열(`string[]`)
    - 태그의 입력과 삭제가 일어날 때 태그의 목록을 유지하기 위해서

- **보여주기**: 상태에 저장된 태그 배열을 `map`으로 화면에 보여줌
- **추가**: `input`에 값을 입력하고 엔터를 누르면 상태 배열에 입력한 값을 추가함 (이미 같은 값이 있는 경우에는 추가하지 않음)
- **삭제**: x 버튼이 클릭되면 해당 태그를 `splice`를 이용하여 삭제함
- 태그가 많아질 경우, css가 깨지지 않도록 다음 줄로 넘어가게 만듦

### 어려웠던 점

- **input에 포커스가 됐을 때 바깥 div의 border 색을 바꾸기**  
  `:focus-within` 의사 클래스 사용
- **태그가 많아지면 태그 모양이 깨져서 글씨가 제대로 안 보임**  
  `flex-wrap: wrap`으로 공간이 모자르면 다음 줄로 넘어가게 만듦
- **input의 너비가 작아서 클릭을 해도 focus가 안 되는 영역이 존재함**  
  `flex-grow: 1`로 input의 너비를 tag를 제외한 나머지 공간을 채우게 키움
- **태그를 지우는 방식**
  - _문제_  
    지우려는 태그의 인덱스를 이용하여 `slice`로 왼쪽을 자르고 오른쪽을 잘라서 이어붙이는 방법으로 구현했는데 배열을 2번 순회하는 것이 비효율적인 것 같음
  - _해결_  
    `splice`를 이용하여 인덱스 기준 1개를 잘라내는 방법으로 구현

### 사용 방법

```jsx
<Tag />
```

####

---

## AutoComplete

### 구현 방법

- _상태_

  - 자동완성 단어 리스트를 보여줄지 안 보여줄지를 관리(`boolean`)
    - 검색어를 입력했을 때만 자동완성단어들을 보여주기 위해
  - `input`에 입력된 문자열(`string`)
    - 문자를 입력할 때마다 자동 완성 단어를 보여주기 위해
  - 검색된 단어 배열(`string[]`)
    - 입력한 문자열에 따라 화면에 보여줄 단어들을 관리
    - 자동완성할 수 있는 단어가 없을 경우를 관리
  - 현재 선택 중인 인덱스(`number`)
    - 화살표키로 단어를 선택하려할 때 사용하기 위해
    - 처음엔 선택된 단어가 없으므로 `-1`

- 자동완성에 사용되는 단어는 props로 전달

- `input`에 값이 입력될 때마다 `filter`를 이용하여 `input`의 값을 포함하는 단어를 화면에 보여줌
- `input`에 입력값이 있고, 자동완성 단어가 1개 이상이면 자동완성 단어를 보여줌
- 단어에 클릭 이벤트가 발생하면 `input`의 값을 클릭된 단어로 바꿈
- x 버튼을 클릭할 경우 `input`의 값을 빈 문자열로 바꿈
- 키보드로 단어 선택
  - 화살표 위, 아래가 눌릴 경우를 `onKeyUp` 이벤트로 감지하여 단어의 위, 아래로 이동할 수 있도록 함
  - 엔터키가 눌릴 경우 현재 인덱스의 단어로 `input` 값이 변하도록 구현함

### 어려웠던 점

- **검색에 사용할 단어들**  
  문자열 배열을 더미데이터로 만들어 props로 가져와서 사용하였다.
- **자동완성 배열 관리**  
  처음엔 자동완성문자를 보여줄 때, `filter`와 `map`을 한 번에 이어서 코드를 짰었다. 그런데 코드가 복잡하고 알아보기 힘들어 지는 것 같아 `filter` 된 배열을 저장하는 상태를 추가하여 `filter`와 `map`을 분리하였다.
- **화살표키로 단어 이동하기**
  - _문제_  
    위와 아래를 둘 다 잘 작동하도록 만들기가 까다로웠다. 아래가 잘 되게 만들어 놓으면 위가 잘 안 되고, 위가 잘 되게 만들어놓으면, 아래가 잘 안 됐다.
  - _해결_  
    짧은 코드로 효율적으로 해결해야한다는 생각이 있었는데, 그 생각을 버리고 차근차근 하려고 했다. 일단 큰 틀을 잡아놓고 하나씩 테스트를 해보면서 오류가 나는 부분을 하나씩 고쳐나갔다. 결과적으로 동작은 잘 하지만 알아보기 힘든 코드가 된 것 같지만, 나중에 다시 보면서 정리해보면 될 것 같다.

### 사용 방법

|      | type     | required |
| ---- | -------- | -------- |
| data | string[] |          |

```jsx
const autoCompleteData = [
  'antique',
  'refurbished',
  'vintage',
  'rustic',
  '중고A급',
  '중고B급',
];

<AutoComplete data={autoCompleteData} />;
```

####

---

## ClickToEdit

### 구현방법

- _상태_

  - `input`을 보여줄지 말지 결정하는 상태(`boolean`)
    - 값에 따라 `span` 또는 `input`을 보여준다.
  - 화면에 보여주는 저장된 값(`string`)
  - 입력 중인 값(`string`) - 내부 컴포넌트의 상태
    - 저장하기 전까지는 외부 컴포넌트와 다른 값을 가지므로 따로 관리

- 이름과 나이 둘 다 같은 형식으로 이루어져 있으므로 컴포넌트로 만들어서 재사용함
- `span`에 클릭이벤트가 발생할 경우 `input`이 보이고, useRef를 이용하여 `input`에 커서가 올라가게 만듦
- `input`에서 엔터를 누르거나, 커서가 사라지면(`blur`) 값이 저장되어 화면에 보이는 값이 새로운 값으로 변경되게 만듦

### 어려웠던 점

- **input에 커서 올리기**

  - _문제_

    수정하려고 클릭했을 때, 1. `input`이 보이고, 2. `useRef`로 `input`에 `focus`를 해야하는데 오류가 발생하면서 2가 안 됨

    - `ref.current`가 `null`이라 `focus` 함수를 실행할 수 없다는 오류가 발생함

  - _해결_
    원인은 상태 변경으로 인한 리랜더링이 발생하기 전이라 DOM에 `input`이 없는데, `input`에 `focus`를 주려고 해서 였다. 그래서 `input`이 화면에 보이는 것과 `focus`하는 것을 서로 다른 생명주기에서 실행하기 위해 `useEffect`를 이용해서 `focus`를 리랜더링 이후에 실행하도록 변경하여 해결했다.

- **엔터를 누르거나 포커스가 벗어났을 때 값이 저장**

  - _문제_

    `input`에 `ClickToEdit` 컴포넌트가 가진 상태를 연결했더니 값이 입력 중에도 수정됨

  - _해결_

    `ClickToEdit` 컴포넌트 내부에 따로 만든 컴포넌트 안에서 새로운 값을 위한 상태를 따로 만들어 관리하고, 저장할 때만 `ClickToEdit` 컴포넌트의 상태가 변경되도록 수정

### 사용 방법

```jsx
<ClickToEdit />
```

####

# 실행 방법

- 터미널에서 아래 명령어 순서대로 입력

  ```bash
  git clone git@github.com:kimdoyeonn/wanted_pre_onboarding.git
  cd ./wanted_pre_onboarding/custom-component
  npm install
  npm run start
  ```

- 브라우저 주소창에 `localhost:3000` 입력하여 이동
